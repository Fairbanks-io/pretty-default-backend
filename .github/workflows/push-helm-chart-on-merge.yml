# This is a basic workflow to help you get started with Actions

name: 'Push Helm Chart'

on:
  pull_request:
    types: [closed]
    
jobs:
  push-helm-chart:
    if: github.event.pull_request.merged == 'true'
    runs-on: ubuntu-latest
    name: Push helm chart to CodeFresh repo
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Push Helm Chart to ChartMuseum
        uses: bsord/cf-helm-push@v14.0.8
        with:
          access-token: ${{ secrets.CF_API_KEY }}
          repository-url: 'cm://h.cfcr.io/fairbanks.io/default'
          force: true
          chart-folder: chart
